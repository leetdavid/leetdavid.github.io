import{m}from"./runtime.eb6ecd1e.js";const f=[];function l(){}function w(t,n){return{subscribe:x(t,n).subscribe}}function q(t,n){return t!=t?n==n:t!==n||t&&typeof t=="object"||typeof t=="function"}function x(t,n=l){let o=null;const s=new Set;function i(r){if(q(t,r)&&(t=r,o)){const u=!f.length;for(const e of s)e[1](),f.push(e,t);if(u){for(let e=0;e<f.length;e+=2)f[e][0](f[e+1]);f.length=0}}}function a(r){i(r(t))}function b(r,u=l){const e=[r,u];return s.add(e),s.size===1&&(o=n(i,a)||l),r(t),()=>{s.delete(e),s.size===0&&o&&(o(),o=null)}}return{set:i,update:a,subscribe:b}}function z(t){return t()}function A(t){t.forEach(z)}function j(t,n,o){const s=!Array.isArray(t),i=s?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=n.length<2;return w(o,(b,r)=>{let u=!1;const e=[];let p=0,d=l;const g=()=>{if(p)return;d();const c=n(s?e[0]:e,b,r);a?b(c):d=typeof c=="function"?c:l},h=i.map((c,y)=>m(c,_=>{e[y]=_,p&=~(1<<y),u&&g()},()=>{p|=1<<y}));return u=!0,g(),function(){A(h),d(),u=!1}})}export{j as d,w as r,x as w};
